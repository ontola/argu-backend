@import "variables";
@import "mixins";

.modal {
  position: fixed;
  display: inline-block;
  margin-top: 3em;
  padding-top: 0;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 20;
  overflow-y: auto;
  text-align: center;
  pointer-events: bounding-box; // Makes the overflow clickable, so it can close.

  .box {
    pointer-events: auto;
    text-align: left;
    width: 100%;
  }
  .box:last-child {
    margin-bottom: 0;
  }
  .box-small {
    display: inline-block;
    vertical-align: top;
    margin: 0 1em 1em;
  }
  @include animation(from-top-fade .2s ease-out);
  @include bp-medium{
    //position: absolute;
    margin-top: 1em;
  }
  &.col-1{
    display: flex;
    flex-direction: column;
    margin-bottom: 0;
  }
  .modal-section {
    padding: 1.1em 1.4em 0.1em 1.4em;
  }
  .formtastic button {
    padding: .6em 2.5em .6em;
  }

  .leaflet-container {
    height: 400px;
  }
}

.modal h1 {
  margin-bottom: 1em;
  color: white;
}

.overlay-back {
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 11;
  height: 100%;
  overflow: hidden;
  background-color: $darken_overlay;
  @include animation(fade-in .2s linear);
  @include transition(.2s);
}

.overlay-bottom {
  flex-grow: 1;
}

.modal-container:not(.no-close), .react-modal-container:not(.no-close){
  .overlay{
    cursor: pointer;
    &.overlay-back {
      &:after{
        content: 'x';
        font-weight: bold;
        position: absolute;
        top: 0;
        right: 0;
        color: white;
        background-color: rgba(255, 255, 255, 0.24);
        padding: 0.5em 0.7em;
        pointer-events: none;
      }
    }
  }
}

// Makes modals scrollable on smaller mobile devies. Apply this to body tag when the modal is opened. Remove it when the modal closes.
.modal-opened{
  overflow: hidden;
  //position: fixed; // Should make scrolling of modal possible on iOS, but seems to prevent it in chrome...
  height: 100%;
  width: 100%;
}

.modal-hide {
  .modal {
    @include animation(to-bottom-fade .2s ease-in both);
  }
  .overlay-back {
    @include animation(fade-out .2s linear both);
  }
}

.modal-scroll-box {
  background-color: #ececec ;
  padding: 0;
  border-radius: 5px;
  max-height: calc(100vh - 4em);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

.modal-container {

  .context {
    z-index: 41;
    position: fixed;
    top: 4em;
    width: 100%;
  }

  .context--previous {
    right: initial;
    left: 0;
  }

  .context--next {
    left: initial;
    right: 0;
  }
}
