var _parent = $('<%= @comment.parent.present? ? "##{@comment.parent.identifier}" : '.comments-container' %>');
<% if @comment.parent.present? %>
_parent.find('.comment_form').hide().find('textarea').val('');
_parent.append('<%= escape_javascript render partial: 'comments/comment', locals: { resource: @comment.parent_model, c: @comment } %>');
<% else %>
_parent.find('textarea').first().val('');
_parent.find('.comments').prepend('<%= escape_javascript render partial: 'comments/comment', locals: { resource: @comment.parent_model, c: @comment } %>');
<% end %>
$('.comments [itemprop="commentCount"]').text(<%= @comment.parent_model.children_count(:comments) %>);
