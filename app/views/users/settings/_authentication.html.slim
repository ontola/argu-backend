=semantic_form_for authenticated_resource, url: settings_user_path, method: :put, remote: true, authenticity_token: true do |f|
  =f.inputs name: t('users.registrations.categories.authentication') do
    =f.inputs :shortname, for: :shortname, disabled: authenticated_resource.url.present? do |sf|
      =sf.input :shortname, required: false
    - if authenticated_resource.url.present?
      li.form-helper
        span="#{t('profiles.edit.shortname_not_allowed')} #{link_to t('users.settings.menu.profile'), settings_url_for(authenticated_resource, :profile)}.".html_safe
    - if login_providers_left(authenticated_resource).present?
      label= t('users_oauth_new')
      .form-item
        =render partial: 'authentications/login_providers', locals: {providers: login_providers_left(authenticated_resource)}
    - if authenticated_resource.identities.present?
      =render partial: 'authentications/login_providers_connected', locals: {identities: authenticated_resource.identities, show_decouple: authenticated_resource.has_password?}
    label= 'emails'
    .formtastic--full-width
      =f.fields_for :email_addresses do |email|
        =render 'email_address_fields', f: email
      .links
        =link_to_add_association f, :email_addresses, class: 'btn-subtle' do
          span.fa.fa-plus
          span.icon-left= t('users.emails.add')
    -if authenticated_resource.has_password?
      =f.input :password, label: t('users_password_edit'), required: authenticated_resource.new_record?
      =f.input :password_confirmation, label: t('users_password_confirmation')
      =f.inputs name: t('formtastic.labels.current_password')
        =f.input :current_password, required: true
    -elsif authenticated_resource.identities.any?
      p
        =t('users.registrations.no_password')
        =link_to " #{t('devise.passwords.new.submit')}.", password_path(authenticated_resource), data: {method: :post, turbolinks: 'false'}, id: 'send-instructions', rel: :nofollow
  =f.input :tab, as: :hidden, input_html: {value: tab}
  =f.actions do
    =f.action :submit, as: :button, label: t('save')
