=set_title @user || @page || @profile
=connected_web url: dual_profile_url(@profile, only_path: false, canonical: true),
               name: seolized_title(@user || @page || @profile),
               description: seolized_description(@user || @page || @profile),
               image: @profile.default_profile_photo
- if @page.present?
  =render partial: 'manage_bar', locals: {resource: @page, active: :show} if policy(@page).update?
- else
  =render partial: 'profiles/profile_bar', locals: {resource: @profile, active: :show} if policy(@profile).update?
.cover-behind.cover--profile
  .cover-image[style="background-image: url('#{@profile.default_cover_photo&.url(:cover)}'); "]
.col-1
  .profile-top-container
    =image_tag @profile.default_profile_photo.url(:avatar), container_class: 'profile', class: 'profile-picture profile-picture--big'
    .profile-header
      h1= @profile.display_name
  .profile[data-intro= t('intro.profile.show', name: @profile.display_name)]
    .box
      section
        - if @profile.roles.pluck(:name).include?('staff')
          span.role Staff
        p= @profile.about
        - if @profile.profileable_type == 'User' && @profile.profileable.favorite_forums.present?
          label Forums:
          ul.icon-list.margin-bottom
            - @profile.profileable.favorites.joins(:edge).where(edges: {owner_type: 'Forum'}).each do |favorite|
              -next if favorite.edge.owner.hidden?
              li
                =link_to forum_path(favorite.edge.owner) do
                  span= favorite.edge.owner.name
- unless @page.present?
  .boxes-list[data-intro= t('intro.profile.votes') data-position="top"]
    - if (@profile.are_votes_public? || current_user == @user) && @profile.votes.count > 0
      .col-1
        - unless @profile.are_votes_public?
          span.fa.fa-lock
          span.icon-left= t('profiles.votes_are_private')
        .intro-filler[data-intro= t("intro.profile.votes") data-position="top"]
      =render_columns(@collection, collection_model: Vote)
    - elsif @profile.are_votes_public?
      h2.center= t('profiles.didnt_vote_name', name: @profile.display_name)
